module.exports=function(){"use strict";function t(t,e){var i=[].slice.call(document.querySelectorAll(t));if(0===i.length)throw new Error("Tabs cannot be initialised, no augmentable elements found");return i.forEach(function(t,i){n[i]=a(Object.create(o),{DOMElement:t,settings:l({},c,e)},{classlist:require("dom-classlist"),attributelist:require("storm-attributelist")}),n[i].init()}),n}function e(e,s){i(),t(e,s)}function i(){n=[]}var s={RETURN:13,TAB:9},n=[],r=["click","keydown"],a=require("object-assign"),l=require("merge"),c={titleClass:".js-tabs__link",currentClass:"active",active:0},o={init:function(){this.links=[].slice.call(this.DOMElement.querySelectorAll(this.settings.titleClass)),this.targets=this.links.map(function(t){return document.getElementById(t.getAttribute("href").substr(1))||console.error("Tab target not found")}),this.current=this.settings.active,this.initAria().initTitles().open(this.current)},initAria:function(){return this.links.forEach(function(t,e){this.attributelist.set(t,{role:"tab","aria-expanded":!1,"aria-selected":!1,"aria-controls":this.targets[e].getAttribute("id")})}.bind(this)),this.targets.forEach(function(t){this.attributelist.set(t,{role:"tabpanel","aria-hidden":!0,tabIndex:"-1"})}.bind(this)),this},initTitles:function(){var t=function(t){this.toggle(t)};return this.links.forEach(function(e,i){r.forEach(function(n){e.addEventListener(n,function(e){e.keyCode&&e.keyCode===s.TAB||e.keyCode&&e.keyCode!==s.RETURN||(e.preventDefault(),t.call(this,i))}.bind(this),!1)}.bind(this))}.bind(this)),this},change:function(t,e){var i={open:{classlist:"add",tabIndex:{target:this.targets[e],value:"0"}},close:{classlist:"remove",tabIndex:{target:this.targets[this.current],value:"-1"}}};this.classlist(this.links[e])[i[t].classlist](this.settings.currentClass),this.classlist(this.targets[e])[i[t].classlist](this.settings.currentClass),this.attributelist.toggle(this.targets[e],"aria-hidden"),this.attributelist.toggle(this.links[e],["aria-selected","aria-expanded"]),this.attributelist.set(i[t].tabIndex.target,{tabIndex:i[t].tabIndex.value})},open:function(t){return this.change("open",t),this.current=t,this},close:function(t){return this.change("close",t),this},toggle:function(t){return this.current!==t?null===this.current?(this.open(t),this):(this.close(this.current).open(t),this):void 0}};return{init:t,reload:e,destroy:i}}();
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.StormTabs=e()}(this,function(){"use strict";function t(t,e){this.settings=l({},r,e),this.links=h(t,function(t){return a(t).contains(this.settings.titleClass)}.bind(this)),this.targets=this.links.map(function(t){return document.getElementById(t.getAttribute("href").substr(1))||console.error("Tab target not found")}),this.current=this.settings.active,this.initAria(),this.initTitles()}function e(e,i){var n=[].slice.call(document.querySelectorAll(e));if(0===n.length)throw new Error("Tabs cannot be initialised, no augmentable elements found");return n.forEach(function(e){s.push(new t(e,i))}),s}function i(t,i){n(),e(t,i)}function n(){s=[]}var s=[],r={titleClass:"js-tabs__link",currentClass:"active",active:0},a=require("dom-classlist"),o=require("storm-attributelist"),l=require("merge"),h=function(t,e){var i=[],n=function(t){for(var s=0;s<t.length;s++)!!e(t[s])&&i.push(t[s]),t[s].children&&t[s].children.length&&n(t[s].children);return i};return t.children&&n(t.children)||null};return t.prototype.initAria=function(){return this.links.forEach(function(t,e){o.add(t,{role:"tab","aria-expanded":!1,"aria-selected":!1,"aria-controls":this.targets[e].getAttribute("id")})}.bind(this)),this.targets.forEach(function(t){o.add(t,{role:"tabpanel","aria-hidden":!0,tabIndex:"-1"})}),this},t.prototype.initTitles=function(){var t=function(t){this.toggle(t)};return this.links.forEach(function(e,i){e.addEventListener("click",function(e){e.preventDefault(),t.call(this,i)}.bind(this),!1)}.bind(this)),this},t.prototype.open=function(t){return a(this.links[t]).add(this.settings.currentClass),a(this.targets[t]).add(this.settings.currentClass),o.toggle(this.targets[t],"aria-hidden"),o.toggle(this.links[t],"aria-selected"),o.toggle(this.links[t],"aria-expanded"),o.add(this.targets[t],{tabIndex:"0"}),this.current=t,this},t.prototype.close=function(t){return a(this.links[this.current]).remove(this.settings.currentClass),a(this.targets[this.current]).remove(this.settings.currentClass),o.toggle(this.targets[t],"aria-hidden"),o.toggle(this.links[t],"aria-selected"),o.toggle(this.links[t],"aria-expanded"),o.add(this.targets[this.current],{tabIndex:"-1"}),this},t.prototype.toggle=function(t){return null===this.current?(this.open(t),this):(this.close(this.current).open(t),this)},{init:e,reload:i,destroy:n}});